<div id="suggested-users">
</div>

<script>
  // Fetch the suggested users from the JSON API
  fetch('/suggested-users/')
      .then(response => response.json())
      .then(data => {
          const suggestedUsersDiv = document.getElementById('suggested-users');

          // Loop through the users and create HTML elements for each user
          data.users.forEach(user => {
              const userDiv = document.createElement('div');
              userDiv.classList.add('suggested-user');
              const profileImage = user.profile_image_url || '/path/to/default/image/';

              const s3Url = 'https://awesome-bucket-django.s3.amazonaws.com/';
              const imageUrl = profileImage.startsWith('http') ? profileImage : s3Url + profileImage;

              userDiv.innerHTML = `
                  <a href="/profile/${user.id}">
                      <img src="${imageUrl}" alt="${user.username}" width="50" height="50">
                      <span>${user.username}</span>
                  </a>
                  <button class="btn btn-primary btn-sm" onclick="followUser(${user.id})" data-following="false">Follow</button>
              `;

              suggestedUsersDiv.appendChild(userDiv);
          });
      })
      .catch(error => {
          console.error('Error fetching suggested users:', error);
      });

  // Rest of your code...
</script>
